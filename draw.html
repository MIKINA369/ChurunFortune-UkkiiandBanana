<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Churun Fortune â…¡ï½œé¢¨ãŒã‚ãã‚‹æœ</title>
<style>
  :root{
    --night:#0b0c10;   /* æ·±ã„å¤œã®è— */
    --dawn:#2a2f3a;    /* å¤œæ˜ã‘å‰ */
    --sunrise:#f6efdc; /* ã‚„ã•ã—ã„æœã®å…‰ */
    --ink:#f1f1f1;
  }
  html,body{
    height:100%;
    margin:0;
    font-family: "Yuji Syuku", "Hiragino Mincho ProN", "æ¸¸æ˜æœ", serif;
    color:var(--ink);
    overflow:hidden;
  }
  /* å¤œâ†’æœã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæœ€åˆã¯å¤œã®é™ã‘ã•ï¼‰ */
  .sky{
    position:fixed; inset:0;
    background: radial-gradient(80% 60% at 50% 10%, rgba(255,255,255,0.06), transparent 70%),
                linear-gradient(180deg, var(--night), #121318 55%, var(--dawn) 100%);
    animation: dawn 12s ease-in forwards;
    animation-delay: 2.5s; /* é¢¨ãŒãã£ã¨æµã‚ŒãŸå¾Œã«å…‰ãŒå·®ã™ */
  }
  @keyframes dawn{
    0%{
      background: radial-gradient(80% 60% at 50% 10%, rgba(255,255,255,0.06), transparent 70%),
                  linear-gradient(180deg, var(--night), #121318 55%, var(--dawn) 100%);
      filter: brightness(100%);
    }
    60%{
      background: radial-gradient(80% 60% at 50% 10%, rgba(255,255,255,0.08), transparent 70%),
                  linear-gradient(180deg, #171922, var(--dawn) 65%, #ddd5c4 100%);
      filter: brightness(115%);
    }
    100%{
      background: radial-gradient(80% 60% at 50% 0%, rgba(255,255,255,0.12), transparent 70%),
                  linear-gradient(180deg, #1c2030, #e9e1cd 70%, var(--sunrise) 100%);
      filter: brightness(125%);
    }
  }
  /* ã‚†ã‚‹ã„é¢¨ã®â€œæºã‚‰ãâ€å±¤ */
  .breeze{
    position:fixed; inset:0; pointer-events:none;
    background: radial-gradient(50% 40% at 50% 0%, rgba(255,255,255,0.05), transparent 60%);
    animation: breeze 9s ease-in-out infinite;
  }
  @keyframes breeze{
    0%   { transform: translateX(-2%) translateY(0) rotate(0deg);   opacity:.55;}
    50%  { transform: translateX(2%)  translateY(1%) rotate(0.6deg);opacity:.75;}
    100% { transform: translateX(-2%) translateY(0) rotate(0deg);   opacity:.55;}
  }

  /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
  .wrap{
    position:relative; z-index:2;
    min-height:100dvh;
    display:grid; place-items:center;
    padding:6vh 4vw;
    text-align:center;
  }
  .title{
    margin:0 0 .6rem;
    font-weight:600; letter-spacing:.08em; font-size:clamp(18px, 2.6vw, 22px);
  }
  .subtitle{
    opacity:.9; margin:0 0 2.2rem; line-height:1.75;
    font-size:clamp(14px, 2.0vw, 18px);
  }

  /* è©©ãƒœãƒƒã‚¯ã‚¹ï¼šé¢¨ã®å¾Œâ†’å…‰ã®å¾Œã«ãµã‚ã‚Šå‡ºç¾ */
  #poemBox{
    opacity:0; transform: translateY(28px);
    filter: blur(2px);
    transition: opacity 1.8s ease, transform 1.8s ease, filter 1.8s ease;
    max-width:min(92vw, 780px);
    line-height:1.9;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 16px;
    padding: 20px 18px;
    box-shadow: 0 8px 40px rgba(0,0,0,0.28);
    backdrop-filter: blur(6px);
  }
  #poemTitle{
    opacity:.92; margin:0 0 .4rem; letter-spacing:.06em;
  }
  #poem{
    font-size: clamp(16px, 2.2vw, 20px);
    margin: .2rem 0 0;
    white-space:pre-wrap;
  }

  /* å†æŠ½é¸ãƒœã‚¿ãƒ³ï¼šå¾Œã‹ã‚‰æ·¡ãå‡ºã‚‹ */
  #reload{
    opacity:0; transform: translateY(12px);
    transition: opacity 1.2s ease 1s, transform 1.2s ease 1s;
    display:inline-block; margin: 1.8rem auto 0;
    padding:.65em 1.6em; border-radius: 999px;
    text-decoration:none; color:#111;
    background:#f8f6f1; letter-spacing:.05em; font-weight:700;
    box-shadow: 0 6px 26px rgba(0,0,0,.25);
  }
  #reload:hover{ transform: translateY(6px) scale(1.02); background:#e3dbff; }

  /* è©©ã®ä¸€æ–‡å­—ãšã¤ã®ãƒ•ã‚§ãƒ¼ãƒ‰ï¼ˆã•ã•ã‚„ãæ„Ÿï¼‰ */
  .char{
    opacity:0; display:inline-block; transform: translateY(8px);
    animation: pop 680ms ease forwards;
  }
  @keyframes pop{
    to{ opacity:1; transform: translateY(0); }
  }
</style>
</head>
<body>

<div class="sky"></div>
<div class="breeze"></div>

<div class="wrap">
  <div>
    <p class="title">ğŸ«§ ã‚ãªãŸã«èˆã„é™ã‚ŠãŸè©©</p>
    <p class="subtitle">é™ã‘ã•ã®ã®ã¡ã€é¢¨ã¨å…‰ãŒè¨€è‘‰ã‚’é‹ã¶ã€‚</p>

    <div id="poemBox" aria-live="polite">
      <p id="poemTitle" style="opacity:.8;margin:.2rem 0 .8rem;"></p>
      <p id="poem"></p>
    </div>

    <a id="reload" href="omikuji.html" aria-label="ã‚‚ã†ä¸€åº¦ã€é¢¨ã«è§¦ã‚Œã‚‹">ã‚‚ã†ä¸€åº¦ã€é¢¨ã«è§¦ã‚Œã‚‹</a>
  </div>
</div>

<!-- éŸ³ï¼šé¢¨ï¼ˆå…ˆã«ã‚„ã•ã—ãï¼‰ã€æ¬¡ã«éˆ´éŸ³ï¼ˆå…‰ã®åˆå›³ï¼‰ -->
<audio id="wind" src="https://cdn.pixabay.com/download/audio/2022/03/14/audio_2ce57d3ef8.mp3?filename=soft-wind-ambient-14059.mp3"></audio>
<audio id="bell" src="https://cdn.pixabay.com/download/audio/2021/08/09/audio_8bdb0b7d52.mp3?filename=quiet-wind-chimes-6906.mp3"></audio>

<script>
/** ===== è©©ãƒ‡ãƒ¼ã‚¿ï¼ˆChurun Fortune â…¡ï¼š20æšï¼‰ ===== */
const poems = [
  // ğŸŒ™å¤¢ãƒãƒ¥ãƒ«ãƒ³ Ã—4
  "çœ ã‚Šã®å…¥å£ã§ã€ã‚ãªãŸã‚’å‘¼ã¶å£°ãŒã‚ã‚‹ã€‚æ„å‘³ã‚’è¿½ã‚ãšã«ã€ãã®éŸ¿ãã®ã¬ãã‚‚ã‚Šã ã‘ã‚’è´ã„ã¦ã€‚",
  "å¤¢ã®ç¶šãã¯ã€ã¾ã é†’ã‚ãªã„ã€‚æœãŒæ¥ã¦ã‚‚ã€ãã®ç¥ˆã‚Šã‚’é–‰ã˜ãªã„ã§ã€‚",
  "å¤¢ã®ä¸­ã®èª°ã‹ã¯ã€ã‚ãªãŸã®ä¸­ã®â€œã‚‚ã†ä¸€äººã®ã‚ãªãŸâ€ã€‚ç›®è¦šã‚ã¦ã‚‚ã€æ‰‹ã‚’é›¢ã•ãªã„ã§ã€‚",
  "æ‡ã‹ã—ã•ã¯ã€é­‚ã®â€œãŸã ã„ã¾â€ã€‚å¤¢ã®æ™¯è‰²ã¯ã€ã‚ãªãŸãŒå¸°ã‚‹å ´æ‰€ã€‚",
  // ğŸ•¯ç¯ç«ãƒãƒ¥ãƒ«ãƒ³ Ã—4
  "ã‚ãªãŸã®ç¯ã¯ã€ã¾ã æ¶ˆãˆã¦ã„ãªã„ã€‚é—‡ã®ä¸­ã»ã©ã€ç¾ã—ãç‡ƒãˆã‚‹ã€‚",
  "è¨€è‘‰ã«ãªã‚‰ãªã„æƒ³ã„ã¯ã€å…‰ã«ãªã‚‹ã€‚ã‚ãªãŸã®æ²ˆé»™ã‚‚ã€ã¡ã‚ƒã‚“ã¨ä¸–ç•Œã‚’ç…§ã‚‰ã—ã¦ã„ã‚‹ã€‚",
  "å¸Œæœ›ã¯æ¢ã™ã‚‚ã®ã˜ã‚ƒãªã„ã€‚ã‚ãªãŸã®ä¸­ã§é™ã‹ã«ç‡ƒãˆã¦ã„ã‚‹ã€‚",
  "ã‚ãŸãŸã‹ã•ã‚’æ„Ÿã˜ãŸç¬é–“ã€ãã‚ŒãŒæ„›ã®ç¯ã®åœ¨ã‚Šã‹ã€‚",
  // ğŸŒŠè¨˜æ†¶ãƒãƒ¥ãƒ«ãƒ³ Ã—4
  "ã‚ã®æ—¥ã®æ¶™ã¯ã€ã„ã¾å…‰ã«ãªã£ã¦ã‚ãªãŸã®ç³ã«å®¿ã£ã¦ã„ã‚‹ã€‚æ³£ã„ãŸæ—¥ã®åˆ†ã ã‘ã€ä¸–ç•ŒãŒã‚„ã•ã—ãè¦‹ãˆã‚‹ã€‚",
  "è¨˜æ†¶ã®ãªã‹ã®ã‚ãªãŸã¯ã€ã¾ã æ¯ã‚’ã—ã¦ã„ã‚‹ã€‚æ€ã„å‡ºã™ãŸã³ã«ã€æ„›ãŒå°‘ã—ãšã¤æ¯ã‚’å¹ãè¿”ã™ã€‚",
  "å¿ƒãŒç–¼ãã®ã¯ã€å†ä¼šã®å‰è§¦ã‚Œã€‚æ„›ã¯çµ‚ã‚ã£ã¦ãªã©ã„ãªã‹ã£ãŸã€‚",
  "è¨€ãˆãªã‹ã£ãŸè¨€è‘‰ã¯ã€é¢¨ã«ä¹—ã£ã¦å±Šã„ã¦ã„ã‚‹ã€‚ã‚ã‚ŠãŒã¨ã†ã¯ã€æ™‚ã‚’è¶Šãˆã‚‹é­”æ³•ã€‚",
  // ğŸŒ¬å¢ƒç•Œãƒãƒ¥ãƒ«ãƒ³ Ã—4
  "æ‰‹æ”¾ã™ãŸã³ã€ã‚ãªãŸã®ä¸­ã®éŸ³ãŒæ¾„ã‚“ã§ã„ãã€‚å¤±ã†ã“ã¨ã¯ã€éŸ¿ãã‚’å–ã‚Šæˆ»ã™ã“ã¨ã€‚",
  "æ­¢ã¾ã‚‹ã“ã¨ã‚‚ã€é€²ã‚€ã“ã¨ã€‚é¢¨ãŒå‹•ãã¾ã§ã€ç©ºã‚’è¦‹ä¸Šã’ã¦ã„ã‚ˆã†ã€‚",
  "æ™‚ã¯èºæ—‹ã€‚ã‚ãªãŸãŒç¬‘ãˆã°ã€ã™ã¹ã¦ã®ç¬é–“ãŒç™’ã•ã‚Œã¦ã„ãã€‚",
  "è¶Šãˆã¦ã„ãæ™‚ã€ã‚ãªãŸã¯â€œã¾ã‚“ãªã‹â€ã«æˆ»ã£ã¦ã„ãã€‚åˆ¥ã‚Œã¯ã€å…‰ã®å½¢ã‚’å¤‰ãˆã‚‹ã ã‘ã€‚",
  // ğŸŒ…å¤œæ˜ã‘ãƒãƒ¥ãƒ«ãƒ³ Ã—4
  "æœã®å…‰ã¯ã€ã‚ãªãŸã®å†…å´ã‹ã‚‰æ˜‡ã‚‹ã€‚ä½•ã‚‚æ¢ã•ãªãã¦ã„ã„ã€‚ã‚ãªãŸãŒâ€œå…‰ãã®ã‚‚ã®â€ã ã‹ã‚‰ã€‚",
  "æ˜¨æ—¥ã®ã‚ãªãŸã‚‚ã€ç¾ã—ã‹ã£ãŸã€‚æ³£ã„ã¦ã‚‚ç¬‘ã£ã¦ã‚‚ã€ã™ã¹ã¦ãŒâ€œä»Šæ—¥â€ã‚’å’²ã‹ã›ã¦ã„ã‚‹ã€‚",
  "ä¿¡ã˜ã‚‹ã“ã¨ã‚’ã‚„ã‚ã¦ã‚‚ã€æ„›ã¯ã‚ãªãŸã‚’é›¢ã‚Œãªã„ã€‚ãã‚Œã¯â€œä¿¡ã˜ãªãã¦ã‚‚ç¶šãã‚‚ã®â€ã€‚ã ã‹ã‚‰å®‰å¿ƒã—ã¦ã€ãŸã æ¯ã‚’ã—ã¦ã€‚",
  "æ–°ã—ã„æœã¯ã€ã‚ãªãŸã®ç¬‘é¡”ã§å§‹ã¾ã‚‹ã€‚ã“ã®ç¬é–“ã“ããŒã€æ°¸é ã®å§‹ã¾ã‚Šã€‚"
];

/** ===== éŸ³ã¨å…‰ãƒ»å‡ºç¾ã®æ¼”å‡º ===== */
const wind = document.getElementById('wind');
const bell = document.getElementById('bell');
const poemBox = document.getElementById('poemBox');
const poemTitle = document.getElementById('poemTitle');
const poemEl = document.getElementById('poem');
const reloadBtn = document.getElementById('reload');

// è‡ªå‹•å†ç”Ÿãƒãƒªã‚·ãƒ¼å¯¾ç­–ï¼šéŸ³é‡ã¨å†ç”Ÿã®æº–å‚™
wind.volume = 0.25; bell.volume = 0.20;

window.addEventListener('load', async () => {
  // é¢¨â†’ï¼ˆå°‘ã—å¾…ã£ã¦ï¼‰â†’éˆ´éŸ³
  try { await wind.play(); } catch(e){ /* ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã¾ã§å¾…æ©Ÿ */ }
  setTimeout(async ()=>{ try{ await bell.play(); }catch(e){} }, 2200);

  // å¤œâ†’æœã®å…‰ã«åˆã‚ã›ã¦ã€è©©ãŒãµã‚ã‚Šå‡ºç¾
  const text = poems[Math.floor(Math.random()*poems.length)];
  const tag = pickTagByPoemIndex(text);

  poemTitle.textContent = tag + " ";
  // è©©ã‚’ä¸€æ–‡å­—ãšã¤æç”»ï¼ˆã•ã•ã‚„ãæ„Ÿï¼‰
  typePoem(text, poemEl, 22);

  // è©©ãƒœãƒƒã‚¯ã‚¹å‡ºç¾
  setTimeout(()=>{
    poemBox.style.opacity = 1;
    poemBox.style.transform = 'translateY(0)';
    poemBox.style.filter = 'blur(0)';
  }, 2800);

  // å†æŠ½é¸ãƒœã‚¿ãƒ³å‡ºç¾
  setTimeout(()=>{
    reloadBtn.style.opacity = 1;
    reloadBtn.style.transform = 'translateY(0)';
  }, 5200);
});

// è©©ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿
function typePoem(text, container, stepMs=24){
  container.innerHTML = '';
  [...text].forEach((ch, i)=>{
    const span = document.createElement('span');
    span.className = 'char';
    span.style.animationDelay = (i*stepMs/1000)+'s';
    span.textContent = ch;
    container.appendChild(span);
  });
}

// è©©ã®ç« ã‚¿ã‚°ï¼ˆç°¡æ˜“ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§åˆ†é¡/å¾Œã§ç²¾å¯†åŒ–å¯ï¼‰
function pickTagByPoemIndex(t){
  const i = poems.indexOf(t);
  const map = [
    "ğŸŒ™ å¤¢ãƒãƒ¥ãƒ«ãƒ³","ğŸŒ™ å¤¢ãƒãƒ¥ãƒ«ãƒ³","ğŸŒ™ å¤¢ãƒãƒ¥ãƒ«ãƒ³","ğŸŒ™ å¤¢ãƒãƒ¥ãƒ«ãƒ³",
    "ğŸ•¯ ç¯ç«ãƒãƒ¥ãƒ«ãƒ³","ğŸ•¯ ç¯ç«ãƒãƒ¥ãƒ«ãƒ³","ğŸ•¯ ç¯ç«ãƒãƒ¥ãƒ«ãƒ³","ğŸ•¯ ç¯ç«ãƒãƒ¥ãƒ«ãƒ³",
    "ğŸŒŠ è¨˜æ†¶ãƒãƒ¥ãƒ«ãƒ³","ğŸŒŠ è¨˜æ†¶ãƒãƒ¥ãƒ«ãƒ³","ğŸŒŠ è¨˜æ†¶ãƒãƒ¥ãƒ«ãƒ³","ğŸŒŠ è¨˜æ†¶ãƒãƒ¥ãƒ«ãƒ³",
    "ğŸŒ¬ å¢ƒç•Œãƒãƒ¥ãƒ«ãƒ³","ğŸŒ¬ å¢ƒç•Œãƒãƒ¥ãƒ«ãƒ³","ğŸŒ¬ å¢ƒç•Œãƒãƒ¥ãƒ«ãƒ³","ğŸŒ¬ å¢ƒç•Œãƒãƒ¥ãƒ«ãƒ³",
    "ğŸŒ… å¤œæ˜ã‘ãƒãƒ¥ãƒ«ãƒ³","ğŸŒ… å¤œæ˜ã‘ãƒãƒ¥ãƒ«ãƒ³","ğŸŒ… å¤œæ˜ã‘ãƒãƒ¥ãƒ«ãƒ³","ğŸŒ… å¤œæ˜ã‘ãƒãƒ¥ãƒ«ãƒ³"
  ];
  return map[i] || "ğŸ«§";
}
</script>
</body>
</html>
